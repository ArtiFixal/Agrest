# Test config
spring.application.name=Agrest
server.port=443
server.http.port=8080
spring.profiles.active=test
debug=true

# SSL
server.ssl.key-store=agrest-keystore.p12
server.ssl.key-alias=ssl-cert
server.ssl.trust-store=agrest-truststore.p12

secret.keystore.path=/dev/shm/vault/secrets/keystore
secret.truststore.path=/dev/shm/vault/secrets/truststore

# CSRF
# How long CSRF token is valid in seconds
app.csrf.ttl=180

# Pagination
app.pagination.sizes[0]=2
app.pagination.sizes[1]=20

# Import Password4j config so Spring can see it
spring.config.import=classpath:psw4j.properties

# DB
spring.r2dbc.url=r2dbc:postgresql://localhost:5432/agresttest
spring.r2dbc.username=postgres
spring.r2dbc.password=password

# Vault
spring.cloud.vault.enabled=true
spring.cloud.vault.uri=https://localhost:8200
spring.cloud.vault.ssl.bundle=vault-client
spring.cloud.vault.ssl.key-alias=vault-cert
spring.cloud.vault.kv.enabled=true
spring.cloud.vault.kv.backend=kv
spring.cloud.vault.kv.cache.ttl=10
spring.cloud.vault.kv.cache.maxttl=15
spring.cloud.vault.kv.cache.size=1000
spring.cloud.vault.kv.default-context=agrest

vault.path.app.init=agrest-app/init

# Liquibase
spring.liquibase.enabled=true
spring.liquibase.url=jdbc:postgresql://localhost:5432/agresttest
spring.liquibase.user=postgres
spring.liquibase.password=password
spring.liquibase.drop-first=true
spring.liquibase.change-log=classpath:db/changelog/db.changelog-master-test.yml
spring.liquibase.default-schema=public

spring.test.execution-listeners=artifixal.agrest.common.LiquibaseTestExecutionListener

# Logging
logging.level.org.springframework.r2dbc=DEBUG
logging.level.liquibase=DEBUG
logging.level.org.springframework.boot.autoconfigure.liquibase=DEBUG

# Redis
spring.data.redis.host=127.0.0.1
spring.data.redis.port=6379
spring.data.redis.password=password
spring.data.redis.database=0
spring.data.redis.timeout=3000ms